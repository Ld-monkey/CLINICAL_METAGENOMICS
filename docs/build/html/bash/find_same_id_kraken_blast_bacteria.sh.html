

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Comparer les identifiants taxonomiques entre Kraken et Blast &mdash; Documentation CLINICAL METAGENOMICS 0.0.1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Récupérer les identifiants taxonomiques du même genre taxonomique entre Kraken et Blast" href="../python/sort_blasted_seq.py.html" />
    <link rel="prev" title="Récupérer les reads d’intérêts" href="recover_reads.sh.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CLINICAL METAGENOMICS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Shell scripts:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="create_kraken_database.sh.html">Créer les bases de données personnalisées avec Kraken 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="classify_set_sequences.sh.html">Classifier les reads</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_blast_database_without_low_complexity.sh.html">Création d’une base de données pour blast sans les séquences de faibles complexités</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch_blast_analyse.sh.html">Analyse des séquences ou reads avec l’algorithme de Blast</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch_preprocess.sh.html">Lancer le pre-process ou pré-traitement (nettoyage des reads)</a></li>
<li class="toctree-l1"><a class="reference internal" href="recover_reads.sh.html">Récupérer les reads d’intérêts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Comparer les identifiants taxonomiques entre Kraken et Blast</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#localisation">Localisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-parametres-d-entree">Les paramètres d’entrée</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exemple-d-execution">Exemple d’exécution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-fichiers-de-sorties-pour-la-comparaison-d-identifiants-taxonomiques">Les fichiers de sorties pour la comparaison d’identifiants taxonomiques</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exemple-d-un-fichier-avec-des-identifiants-conserves">Exemple d’un fichier avec des identifiants conservés :</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#a-suivre">A suivre …</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Python scripts:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python/sort_blasted_seq.py.html">Récupérer les identifiants taxonomiques du même genre taxonomique entre Kraken et Blast</a></li>
</ul>
<p class="caption"><span class="caption-text">Télécharger les bases de données automatiquement</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download/download_ncbi_kraken2_taxonomy.sh.html">Télécharger la taxonomie NCBI de Kraken 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download/download_refseq_species_sequences.sh.html">Télécharger les séquences des espèces virales et bactériennes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download/download_ete3_ncbi_taxonomy_database.sh.html">Télécharger la taxonomie de ncbi avec ete3toolkit</a></li>
</ul>
<p class="caption"><span class="caption-text">Environnement Conda</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../conda/conda_environnement.html">Environnement conda</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CLINICAL METAGENOMICS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Comparer les identifiants taxonomiques entre Kraken et Blast</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/bash/find_same_id_kraken_blast_bacteria.sh.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="comparer-les-identifiants-taxonomiques-entre-kraken-et-blast">
<h1>Comparer les identifiants taxonomiques entre Kraken et Blast<a class="headerlink" href="#comparer-les-identifiants-taxonomiques-entre-kraken-et-blast" title="Lien permanent vers ce titre">¶</a></h1>
<p>Le programme Shell qui permet de récupérer les identifiant du même genre s’appelle :</p>
<div class="admonition hint">
<p class="admonition-title">Indication</p>
<p>find_same_id_kraken_blast_bacteria.sh</p>
</div>
<div class="section" id="localisation">
<h2>Localisation<a class="headerlink" href="#localisation" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>└── src
 ├── bash
 │   ├── find_same_id_kraken_blast_bacteria.sh
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour chaque échantillon et pour chaque reads alignés le programme :</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Compare les identifiants taxonomiques Blast et Kraken et ne conserve que ceux qui sont du même genre,</p></li>
<li><p>Compte le nombre de reads pour chaque espèce,</p></li>
<li><p>Dessine la carte de couverture des virus,</p></li>
<li><p>Et récupère les noms des espèces pour remplacer les ID taxonomiques.</p></li>
</ol>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Il peut être important d’utiliser l’environnement conda « metagenomic_env » pour le bon déroulement des scripts.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Le programme dépend de plusieurs sous-programmes qui sont :
sort_blasted_seq.py</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les programmes python se trouvent dans le dossier src/python/.</p>
</div>
</div>
<div class="section" id="les-parametres-d-entree">
<h2>Les paramètres d’entrée<a class="headerlink" href="#les-parametres-d-entree" title="Lien permanent vers ce titre">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="field-list simple">
<dt class="field-odd">-path_taxo</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>(Input) The path of folder with Bacteria or Viruses or (Fongi) folders          *DIR: input_bacteria_folder</p>
</li>
<li><dl class="field-list simple">
<dt class="field-odd">-path_blast</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>(Input) The folder of the blast results containing.blast.txt.                  *DIR: input_results_blast</p>
</li>
<li><dl class="field-list simple">
<dt class="field-odd">-path_ncbi</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>(Input)  The folder of ncbi taxonomy containing .taxa.sqlite .                   *DIR: input_blast_taxa_db</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A noter que si le paramètre -path_ncbi n’est pas précisé le programme va par défaut choisir le chemin suivant : ~/.etetoolkit/ pour trouver la base de données taxa.sqlite. Si aucune base de données n’est retrouvée c’est peut-être parce que la base de données taxonomique de ncbi n’a pas été télécharger. Nous pouvons télécharger cette base de données grâce au programme download_ete3_ncbi_taxa_db.sh (dans le dossier src/download/).</p>
</div>
</div>
<div class="section" id="exemple-d-execution">
<h2>Exemple d’exécution<a class="headerlink" href="#exemple-d-execution" title="Lien permanent vers ce titre">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./find_same_id_kraken_blast_bacteria.sh <span class="se">\</span>
-path_taxo ../../results/test/bacteria_reads_clean_fda_refseq_human_viral_07_05_2020/ <span class="se">\</span>
-path_blast ../../results/test/bacteria_metaphlan_blast_clean_fda_refseq_human_viral_07_05_2020/ <span class="se">\</span>
-path_ncbi ../../data/databases/ete3_ncbi_taxanomy_database_05_05_2020/
</pre></div>
</div>
</div>
<div class="section" id="les-fichiers-de-sorties-pour-la-comparaison-d-identifiants-taxonomiques">
<h2>Les fichiers de sorties pour la comparaison d’identifiants taxonomiques<a class="headerlink" href="#les-fichiers-de-sorties-pour-la-comparaison-d-identifiants-taxonomiques" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dans le dossier où se trouve les résultats des blasts, un dossier pour chaque fichier blast sera créés. Ce dossier comprend les identifiants taxonomiques qui sont conservés. Les identifiants taxonomiques qui sont conservées entre Blast et Kraken sont les identifiants du même genre.</p>
</div>
<p>Les fichiers de sortie sont :</p>
<blockquote>
<div><ul class="simple">
<li><p>*_conserved.txt : Les identifiants taxonomiques conservés.</p></li>
<li><p>*_notconserved.txt : Les identifiants taxonomiques qui ne sont pas conservés.</p></li>
</ul>
</div></blockquote>
<div class="section" id="exemple-d-un-fichier-avec-des-identifiants-conserves">
<h3>Exemple d’un fichier avec des identifiants conservés :<a class="headerlink" href="#exemple-d-un-fichier-avec-des-identifiants-conserves" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>NB552188:4:H353CBGXC:4:22605:9229:16747 gi<span class="p">|</span><span class="m">422547321</span><span class="p">|</span>ref<span class="p">|</span>NZ_GL383459.1<span class="p">|</span>:130129-130737   <span class="m">356</span>     <span class="m">446</span>     5e-41   <span class="m">169</span>     <span class="m">609</span>     <span class="m">765102</span>  <span class="m">1747</span>    <span class="m">1</span>
NB552188:4:H353CBGXC:2:22205:2911:15651 gi<span class="p">|</span><span class="m">490241673</span><span class="p">|</span>ref<span class="p">|</span>NZ_CALM01000137.1<span class="p">|</span>:c5103-4639  <span class="m">1</span>       <span class="m">85</span>      1e-30   <span class="m">135</span>     <span class="m">465</span>     <span class="m">1118157</span> <span class="m">40324</span>   <span class="m">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-suivre">
<h2>A suivre …<a class="headerlink" href="#a-suivre" title="Lien permanent vers ce titre">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../python/sort_blasted_seq.py.html" class="btn btn-neutral float-right" title="Récupérer les identifiants taxonomiques du même genre taxonomique entre Kraken et Blast" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="recover_reads.sh.html" class="btn btn-neutral float-left" title="Récupérer les reads d’intérêts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Zygnematophyce

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>